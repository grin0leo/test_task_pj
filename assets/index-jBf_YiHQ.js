(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();const E=o=>o==="7"?"7 (":o==="8"?"+7 (":o==="9"?"7 (9":"7 (";function b(o){o.addEventListener("input",c=>{const l=o.value.replace(/\D+/g,""),n=11;let t;o.value.includes("+8")||o.value[0]==="8"?t="":t="+";for(let e=0;e<l.length&&e<n;e++){switch(e){case 0:t+=E(l[e]);continue;case 4:t+=") ";break;case 7:t+="-";break;case 9:t+="-";break}t+=l[e]}o.value=t})}function L(o){return/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(o)}function B(){const o=document.getElementById("phone"),c=document.getElementById("promo-form"),l=document.getElementById("promo-success-message"),n=document.getElementById("promo-error-message"),t=document.getElementById("promo-error-message-valid");l.style.display="none",n.style.display="none",t.style.display="none",b(o);let e,s;c.addEventListener("submit",function(f){f.preventDefault(),clearTimeout(e),clearTimeout(s);const r=o.value;if(!L(o.value)){n.style.display="none",t.style.display="flex",l.style.display="none",validationTimer=setTimeout(()=>{t.style.display="none"},3e3);return}const d=JSON.parse(localStorage.getItem("usedPhoneNumbers"))||[];if(d.includes(r)){n.style.display="flex",l.style.display="none",o.value="",s=setTimeout(()=>{n.style.display="none"},3e3);return}d.push(r),localStorage.setItem("usedPhoneNumbers",JSON.stringify(d)),n.style.display="none",l.style.display="flex",e=setTimeout(()=>{l.style.display="none"},3e3)})}function C(){const o=["Воронеж","Москва","Ростов-на-Дону","Иркутск","Н. Новгород","Санкт-Петербург","Кемерово","Новосибирск","Челябинск","Красноярск","Пермь"],c=document.getElementById("overlay"),l=document.querySelector(".header__location"),n=document.getElementById("selected-city"),t=document.querySelector("template");let e=null;const s=localStorage.getItem("selectedCity");s?(r(),n.textContent=s):setTimeout(()=>{f()},2e3);function f(){if(!e){const a=t.content.cloneNode(!0);l.appendChild(a),e=document.getElementById("location-confirm-modal");const i=document.getElementById("confirm-location-button");i.addEventListener("click",r);const u=document.getElementById("modal-change-location-button");i.addEventListener("click",()=>{p("Ростов-на-Дону",e),r()}),u.addEventListener("click",d)}e.showModal(),c.style.display="block"}function r(){e&&(e.close(),e.remove(),e=null,c.style.display="none")}function d(){r(),c.style.display="none";const i=document.getElementById("city-modal-template").content.cloneNode(!0);document.body.appendChild(i);const u=document.getElementById("city-list"),m=document.getElementById("change-location-modal");u.hasChildNodes()||o.forEach(v=>{const y=document.createElement("button");y.classList.add("change-location-modal__button"),y.textContent=v,y.addEventListener("click",()=>p(v,m)),u.appendChild(y)});const h=document.querySelector("header").getBoundingClientRect().height;m.style.top=`${h}px`,m.style.height=`calc(100vh - ${h}px)`,m.showModal()}function p(a,i){n.textContent=a,localStorage.setItem("selectedCity",a),i.close(),i.remove(),c.style.display="none"}const g=document.getElementById("change-location-button");g&&g.addEventListener("click",d)}function I(){window.scrollTo({top:0,behavior:"smooth"})}function T(o="scroll-button",c="form-section"){const l=document.getElementById(o),n=document.getElementById(c);!l||!n||l.addEventListener("click",t=>{t.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{const e=n.querySelector("input, button, [tabindex]");e==null||e.focus()},1e3)})}document.addEventListener("DOMContentLoaded",()=>{T()});const N=document.querySelector(".back-to-top");N.addEventListener("click",I);document.addEventListener("DOMContentLoaded",function(){B(),C()});
